{"ast":null,"code":"var _jsxFileName = \"/Users/npham24/go/src/Gottacatchemall/clients/src/containers/Main.js\";\nimport React from 'react';\nimport { apiBaseURL, rarityColorMap } from '../global';\nimport TeamSpecificPokemonCard from \"./TeamPokemonCard\";\nimport BallInventory from \"./BallInventory\";\nimport { sendGetRequestWithAuthHeader } from \"../global\";\n\nclass MainPage extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.encounter = async () => {\n      const encounterPath = \"/v1/encounter\";\n      const response = await sendGetRequestWithAuthHeader(apiBaseURL + encounterPath);\n\n      if (response.status == 401) {\n        this.setState({\n          errorMessage: \"Please log in.\"\n        });\n      } else {\n        this.clearErrorMsg();\n      }\n\n      const data = await response.json();\n\n      if (this.state.caughtPokemon) {\n        this.setState({\n          caughtPokemon: null\n        });\n      }\n\n      this.setState({\n        encountering: {\n          isEncountering: true,\n          pokemonName: data.pokemonName,\n          rarity: data.rarity\n        },\n        isAlreadyCaughtBefore: await this.isCaught(data.pokemonName)\n      });\n    };\n\n    this.runaway = async () => {\n      const runawayPath = \"/v1/runaway\";\n      const response = await sendGetRequestWithAuthHeader(apiBaseURL + runawayPath);\n\n      if (response.status == 401) {\n        this.setState({\n          errorMessage: \"Please log in.\"\n        });\n      } else {\n        this.clearErrorMsg();\n      }\n\n      const data = await response.text();\n      this.setState({\n        encountering: {\n          isEncountering: false\n        }\n      });\n    };\n\n    this.catch = async () => {\n      const catchPath = \"/v1/catch/\" + this.state.encountering.pokemonName + \"?ball=\" + this.state.pokeball;\n      const response = await sendGetRequestWithAuthHeader(apiBaseURL + catchPath);\n      const data = await response.json();\n\n      if (data.status === \"success\") {\n        this.setState({\n          encountering: {\n            isEncountering: false\n          },\n          caughtPokemon: data.pokemon\n        });\n      } else {\n        alert(\"Catch failed!\");\n      }\n    };\n\n    this.changeBall = async () => {\n      const inventoryPath = \"/v1/inventory\";\n      const response = await sendGetRequestWithAuthHeader(apiBaseURL + inventoryPath);\n      const inventory = await response.json();\n      this.setState({\n        isSelectingBall: true\n      });\n    };\n\n    this.selectSpecificBall = ballName => {\n      this.setState({\n        pokeball: ballName\n      });\n    };\n\n    this.isCaught = async pokemonName => {\n      const dexPath = '/v1/pokedex';\n      const response = await sendGetRequestWithAuthHeader(apiBaseURL + dexPath);\n      const dex = await response.json();\n      return dex[pokemonName];\n    };\n\n    this.clearErrorMsg = () => {\n      this.setState({\n        errorMessage: \"\"\n      });\n    };\n\n    this.render = () => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 11\n        }\n      }, this.state.errorMessage && /*#__PURE__*/React.createElement(\"p\", {\n        className: \"alert alert-danger\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 15\n        }\n      }, this.state.errorMessage), !this.state.isSelectingBall ? /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 15\n        }\n      }, !this.state.encountering.isEncountering ? /*#__PURE__*/React.createElement(\"button\", {\n        onClick: this.encounter,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 19\n        }\n      }, \"Encounter\") : /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        onClick: this.catch,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 21\n        }\n      }, \"Catch\"), /*#__PURE__*/React.createElement(\"button\", {\n        onClick: this.runaway,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 21\n        }\n      }, \"Run Away\"), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          \"display\": \"flex\",\n          \"justifyContent\": \"center\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"h3\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 23\n        }\n      }, \"Using ball: \"), /*#__PURE__*/React.createElement(\"img\", {\n        style: {\n          \"width\": 50 + \"px\",\n          \"height\": 50 + \"px\"\n        },\n        src: apiBaseURL + \"/v1/items/image/\" + this.state.pokeball,\n        alt: this.state.pokeball + \" image\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 23\n        }\n      }), /*#__PURE__*/React.createElement(\"button\", {\n        style: {\n          \"marginLeft\": 10 + \"px\"\n        },\n        onClick: this.changeBall,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 23\n        }\n      }, \"Change ball\")), /*#__PURE__*/React.createElement(\"h2\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 21\n        }\n      }, \"Encountering:\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card\",\n        style: {\n          \"width\": 400 + \"px\",\n          \"border\": 2 + \"px solid\",\n          \"borderColor\": rarityColorMap[this.state.encountering.rarity],\n          \"paddingTop\": 10 + \"px\",\n          \"paddingBottom\": 5 + \"px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: apiBaseURL + \"/v1/pokedex/image/\" + this.state.encountering.pokemonName,\n        alt: this.props.name + \" image\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 23\n        }\n      }), /*#__PURE__*/React.createElement(\"h3\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 23\n        }\n      }, this.state.encountering.pokemonName), /*#__PURE__*/React.createElement(\"h4\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 25\n        }\n      }, \"Rarity: \"), /*#__PURE__*/React.createElement(\"span\", {\n        style: {\n          \"color\": rarityColorMap[this.state.encountering.rarity]\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 25\n        }\n      }, this.state.encountering.rarity)), this.state.isAlreadyCaughtBefore ? /*#__PURE__*/React.createElement(\"h4\", {\n        style: {\n          \"color\": \"green\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 25\n        }\n      }, \"Already Caught\") : /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 25\n        }\n      }))), this.state.caughtPokemon && /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"h2\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 21\n        }\n      }, \"Yes! \" + this.state.caughtPokemon.pokemonName + \" was caught!\"), /*#__PURE__*/React.createElement(TeamSpecificPokemonCard, Object.assign({}, this.state.caughtPokemon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 21\n        }\n      })))) : /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(BallInventory, {\n        selectSpecificBall: this.selectSpecificBall,\n        selected: this.state.pokeball,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(\"button\", {\n        onClick: () => {\n          this.setState({\n            isSelectingBall: false\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 17\n        }\n      }, \"Back\")));\n    };\n\n    this.state = {\n      searchResults: [],\n      names: [],\n      one: '',\n      // one is just a test variable\n      images: [],\n      pokemon: [],\n      savedPokemon: new Map(),\n      encountering: {\n        isEncountering: false,\n        pokemonName: \"\",\n        rarity: \"\"\n      },\n      isAlreadyCaughtBefore: false,\n      caught: false,\n      caughtPokemon: null,\n      pokeball: \"pokeball\",\n      isSelectingBall: false,\n      errorMessage: \"\"\n    };\n  }\n\n  async componentDidMount() {\n    try {\n      const dexPath = '/v1/pokedex';\n      const response = await sendGetRequestWithAuthHeader(apiBaseURL + dexPath);\n\n      if (response.status == 401) {\n        this.setState({\n          errorMessage: \"Please log in.\"\n        });\n      } else {\n        this.clearErrorMsg();\n      }\n\n      const dex = await response.json();\n      let caughtMon = [];\n\n      for (const pokemonName of Object.keys(dex)) {\n        const caught = dex[pokemonName];\n\n        if (caught) {\n          caughtMon.push(pokemonName);\n        }\n\n        this.setState({\n          caughtMon: caughtMon\n        });\n      }\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n}\n\nexport default MainPage;","map":{"version":3,"sources":["/Users/npham24/go/src/Gottacatchemall/clients/src/containers/Main.js"],"names":["React","apiBaseURL","rarityColorMap","TeamSpecificPokemonCard","BallInventory","sendGetRequestWithAuthHeader","MainPage","Component","constructor","props","encounter","encounterPath","response","status","setState","errorMessage","clearErrorMsg","data","json","state","caughtPokemon","encountering","isEncountering","pokemonName","rarity","isAlreadyCaughtBefore","isCaught","runaway","runawayPath","text","catch","catchPath","pokeball","pokemon","alert","changeBall","inventoryPath","inventory","isSelectingBall","selectSpecificBall","ballName","dexPath","dex","render","name","searchResults","names","one","images","savedPokemon","Map","caught","componentDidMount","caughtMon","Object","keys","push","e","console","log"],"mappings":"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","sourcesContent":["import React from 'react'\n\nimport { apiBaseURL, rarityColorMap } from '../global'\nimport TeamSpecificPokemonCard from \"./TeamPokemonCard\";\nimport BallInventory from \"./BallInventory\";\nimport { sendGetRequestWithAuthHeader } from \"../global\";\n\nclass MainPage extends React.Component {\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            searchResults: [],\n            names: [],\n            one: '', // one is just a test variable\n            images: [],\n            pokemon: [],\n            savedPokemon: new Map(),\n            encountering: {\n              isEncountering: false,\n              pokemonName: \"\",\n              rarity: \"\",\n            },\n            isAlreadyCaughtBefore: false,\n            caught: false,\n            caughtPokemon: null,\n            pokeball: \"pokeball\",\n            isSelectingBall: false,\n            errorMessage: \"\",\n        }\n    }\n\n    async componentDidMount() {\n      try {\n        const dexPath = '/v1/pokedex';\n        const response = await sendGetRequestWithAuthHeader(apiBaseURL + dexPath);\n        if (response.status == 401) {\n          this.setState({\n            errorMessage: \"Please log in.\"\n          })\n        } else {\n          this.clearErrorMsg();\n        }\n        const dex = await response.json();\n  \n        let caughtMon = []\n        for (const pokemonName of Object.keys(dex)) {\n            const caught = dex[pokemonName]\n            if (caught) {\n                caughtMon.push(pokemonName)\n            }\n            this.setState({ caughtMon: caughtMon })\n        }\n      } catch(e) {\n        console.log(e);\n      }\n    }\n\n    encounter = async () => {\n      const encounterPath = \"/v1/encounter\";\n      const response = await sendGetRequestWithAuthHeader(apiBaseURL + encounterPath);\n      if (response.status == 401) {\n        this.setState({\n          errorMessage: \"Please log in.\"\n        })\n      } else {\n        this.clearErrorMsg();\n      }\n\n      const data = await response.json();\n\n      if (this.state.caughtPokemon) {\n        this.setState({\n          caughtPokemon: null\n        });\n      }\n\n      this.setState({encountering: {\n        isEncountering: true,\n        pokemonName: data.pokemonName,\n        rarity: data.rarity,\n      }, isAlreadyCaughtBefore: await this.isCaught(data.pokemonName)})\n\n    }\n\n    runaway = async () => {\n      const runawayPath = \"/v1/runaway\";\n      const response = await sendGetRequestWithAuthHeader(apiBaseURL + runawayPath);\n      \n      if (response.status == 401) {\n        this.setState({\n          errorMessage: \"Please log in.\"\n        })\n      } else {\n        this.clearErrorMsg();\n      }\n\n      const data = await response.text();\n\n      this.setState({encountering: {\n        isEncountering: false\n      }})\n    }\n\n    catch = async () => {\n      const catchPath = \"/v1/catch/\" + this.state.encountering.pokemonName + \"?ball=\" + this.state.pokeball;\n      const response = await sendGetRequestWithAuthHeader(apiBaseURL + catchPath);\n      const data = await response.json();\n\n      if (data.status === \"success\") {\n        this.setState({\n          encountering: {\n            isEncountering: false\n          },\n          caughtPokemon: data.pokemon\n        });\n      } else {\n        alert(\"Catch failed!\");\n      }\n    }\n\n    changeBall = async () => {\n      const inventoryPath = \"/v1/inventory\";\n      const response = await sendGetRequestWithAuthHeader(apiBaseURL + inventoryPath);\n      const inventory = await response.json();\n      this.setState({\n        isSelectingBall: true\n      });\n    }\n\n    selectSpecificBall = (ballName) => {\n      this.setState({\n        pokeball: ballName\n      })\n    }\n\n    isCaught = async (pokemonName) => {\n      const dexPath = '/v1/pokedex';\n      const response = await sendGetRequestWithAuthHeader(apiBaseURL + dexPath);\n      const dex = await response.json();\n      return dex[pokemonName];\n    }\n\n    clearErrorMsg = () => {\n      this.setState({\n        errorMessage: \"\"\n      })\n    }\n\n    render = () => {\n        return (\n          <div>\n            {this.state.errorMessage && (\n              <p className=\"alert alert-danger\">{this.state.errorMessage}</p>\n            )}\n\n            {!this.state.isSelectingBall ? (\n              <div>\n                {!this.state.encountering.isEncountering ? (\n                  <button onClick={this.encounter}>\n                    Encounter\n                  </button>\n                ) : (\n                  <div>\n                    <button onClick={this.catch}>\n                      Catch\n                    </button>\n                    <button onClick={this.runaway}>  \n                      Run Away\n                    </button>\n                    <br/>\n                    <br/>\n                    <div style={{\"display\": \"flex\", \"justifyContent\": \"center\"}}>\n                      <h3>{\"Using ball: \"}</h3>\n                      <img  style = {{\"width\": 50+ \"px\", \"height\": 50 + \"px\"}} \n                            src={apiBaseURL + \"/v1/items/image/\" + this.state.pokeball} \n                            alt={this.state.pokeball + \" image\"} />\n                      <button \n                        style={{\"marginLeft\": 10 + \"px\"}}\n                        onClick={this.changeBall}>Change ball</button>\n                    </div>\n                    <h2>Encountering:</h2>\n                    <div className=\"card\" style={{\n                    \"width\": 400+ \"px\", \n                    \"border\": 2 + \"px solid\",\n                    \"borderColor\": rarityColorMap[this.state.encountering.rarity],\n                    \"paddingTop\": 10 + \"px\",\n                    \"paddingBottom\": 5 + \"px\"\n                    }}>\n                      <img src={apiBaseURL + \"/v1/pokedex/image/\" + this.state.encountering.pokemonName} alt={this.props.name + \" image\"} />\n                      <h3>{this.state.encountering.pokemonName}</h3>\n                      <h4>\n                        <span>Rarity: </span>\n                        <span style={{\"color\": rarityColorMap[this.state.encountering.rarity]}}>{this.state.encountering.rarity}</span>\n                      </h4>\n                      {this.state.isAlreadyCaughtBefore ? (\n                        <h4 style={{\"color\": \"green\"}}>Already Caught</h4>\n                      ) : (\n                        <div></div>\n                      )\n                      }\n                    </div>\n                  </div>\n                )}\n                {this.state.caughtPokemon && \n                  <div>\n                    <h2>{\"Yes! \" + this.state.caughtPokemon.pokemonName + \" was caught!\"}</h2>\n                    <TeamSpecificPokemonCard {...this.state.caughtPokemon}/>\n                  </div>\n                }\n              </div>\n            ) : (\n              <div>\n                <BallInventory selectSpecificBall={this.selectSpecificBall} selected={this.state.pokeball}/>\n                <button onClick={() => {\n                  this.setState({\n                    isSelectingBall: false\n                  })\n                }}>Back</button>\n              </div>\n            )} \n          </div>\n          \n        )\n    }\n}\n\nexport default MainPage\n"]},"metadata":{},"sourceType":"module"}