{"ast":null,"code":"var _jsxFileName = \"/Users/mac/go/src/github.com/Gottacatchemall/clients/src/containers/Login.js\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport SignForm from './SignForm';\nimport api from './api';\nimport PageTypes from '../constants/pageType';\n/**\n * @class\n * @classdesc SignIn handles the sign in component\n */\n\nclass SignIn extends Component {\n  constructor(props) {\n    super(props);\n\n    this.setField = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.setError = error => {\n      this.setState({\n        error\n      });\n    };\n\n    this.submitForm = async e => {\n      e.preventDefault();\n      const {\n        email,\n        password\n      } = this.state;\n      const sendData = {\n        email,\n        password\n      };\n      const response = await fetch(api.base + api.handlers.sessions, {\n        method: \"POST\",\n        body: JSON.stringify(sendData),\n        headers: new Headers({\n          \"Content-Type\": \"application/json\"\n        })\n      });\n\n      if (response.status >= 300) {\n        const error = await response.text();\n        this.setError(error);\n        return;\n      }\n\n      const authToken = response.headers.get(\"Authorization\");\n      localStorage.setItem(\"Authorization\", authToken);\n      this.setError(\"\");\n      this.props.setAuthToken(authToken);\n      const user = await response.json();\n      this.props.setUser(user);\n    };\n\n    this.state = {\n      email: '',\n      password: '',\n      url: \"\",\n      fireRedirect: false\n    };\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  handleChange(event) {\n    this.setState({\n      [event.target.name]: event.target.value\n    });\n  }\n  /**\n   * @description setField will set the field for the provided argument\n   */\n\n\n  render() {\n    const values = this.state;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(SignForm, {\n      setField: this.setField,\n      submitForm: this.submitForm,\n      values: values,\n      fields: this.fields,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: e => this.props.setPage(e, PageTypes.signUp),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 13\n      }\n    }, \"Sign up instead\"), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: e => this.props.setPage(e, PageTypes.forgotPassword),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 13\n      }\n    }, \"Forgot password\"));\n  }\n\n}\n\nSignIn.propTypes = {\n  setPage: PropTypes.func,\n  setAuthToken: PropTypes.func\n};\nexport default SignIn;","map":{"version":3,"sources":["/Users/mac/go/src/github.com/Gottacatchemall/clients/src/containers/Login.js"],"names":["React","Component","PropTypes","SignForm","api","PageTypes","SignIn","constructor","props","setField","e","setState","target","name","value","setError","error","submitForm","preventDefault","email","password","state","sendData","response","fetch","base","handlers","sessions","method","body","JSON","stringify","headers","Headers","status","text","authToken","get","localStorage","setItem","setAuthToken","user","json","setUser","url","fireRedirect","handleChange","bind","event","render","values","fields","setPage","signUp","forgotPassword","propTypes","func"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport SignForm from './SignForm';\nimport api from './api';\nimport PageTypes from '../constants/pageType';\n\n/**\n * @class\n * @classdesc SignIn handles the sign in component\n */\nclass SignIn extends Component {\n    static propTypes = {\n        setPage: PropTypes.func,\n        setAuthToken: PropTypes.func\n    }\n\n    constructor(props) {\n      super(props)\n\n      this.state = {\n          email: '',\n          password: '',\n          url: \"\",\n          fireRedirect: false\n      }\n\n      this.handleChange = this.handleChange.bind(this);\n\n  }\n\n  handleChange(event) {\n      this.setState({ [event.target.name]: event.target.value });\n  }\n\n\n    /**\n     * @description setField will set the field for the provided argument\n     */\n    setField = (e) => {\n        this.setState({ [e.target.name]: e.target.value });\n    }\n\n    /**\n     * @description setError sets the error message\n     */\n    setError = (error) => {\n        this.setState({ error })\n    }\n\n    /**\n     * @description submitForm handles the form submission\n     */\n    submitForm = async (e) => {\n        e.preventDefault();\n        const { email, password } = this.state;\n        const sendData = { email, password };\n        const response = await fetch(api.base + api.handlers.sessions, {\n            method: \"POST\",\n            body: JSON.stringify(sendData),\n            headers: new Headers({\n                \"Content-Type\": \"application/json\"\n            })\n        });\n        if (response.status >= 300) {\n            const error = await response.text();\n            this.setError(error);\n            return;\n        }\n        const authToken = response.headers.get(\"Authorization\")\n        localStorage.setItem(\"Authorization\", authToken);\n        this.setError(\"\");\n        this.props.setAuthToken(authToken);\n        const user = await response.json();\n        this.props.setUser(user);\n    }\n\n    render() {\n        const values = this.state;\n        return <>\n            <SignForm\n                setField={this.setField}\n                submitForm={this.submitForm}\n                values={values}\n                fields={this.fields} />\n            <button onClick={(e) => this.props.setPage(e, PageTypes.signUp)}>Sign up instead</button>\n            <button onClick={(e) => this.props.setPage(e, PageTypes.forgotPassword)}>Forgot password</button>\n        </>\n    }\n}\n\nexport default SignIn;"]},"metadata":{},"sourceType":"module"}