{"ast":null,"code":"var _jsxFileName = \"/Users/mac/go/src/github.com/Gottacatchemall/clients/src/App.js\";\nimport React, { Component } from 'react';\nimport Auth from './Components/Auth/Auth';\nimport PageTypes from './Constants/PageTypes/PageTypes';\nimport Main from './Components/Main/Main';\nimport './Styles/App.css';\nimport api from './Constants/APIEndpoints/APIEndpoints';\n\nclass App extends Component {\n  constructor() {\n    super();\n\n    this.getCurrentUser = async () => {\n      if (!this.state.authToken) {\n        return;\n      }\n\n      const response = await fetch(api.base + api.handlers.myuser, {\n        headers: new Headers({\n          \"Authorization\": this.state.authToken\n        })\n      });\n\n      if (response.status >= 300) {\n        alert(\"Unable to verify login. Logging out...\");\n        localStorage.setItem(\"Authorization\", \"\");\n        this.setAuthToken(\"\");\n        this.setUser(null);\n        return;\n      }\n\n      const user = await response.json();\n      this.setUser(user);\n    };\n\n    this.setPageToSignIn = e => {\n      e.preventDefault();\n      this.setState({\n        page: PageTypes.signIn\n      });\n    };\n\n    this.setPageToSignUp = e => {\n      e.preventDefault();\n      this.setState({\n        page: PageTypes.signUp\n      });\n    };\n\n    this.setPage = (e, page) => {\n      e.preventDefault();\n      this.setState({\n        page\n      });\n    };\n\n    this.setAuthToken = authToken => {\n      this.setState({\n        authToken,\n        page: authToken === \"\" ? PageTypes.signIn : PageTypes.signedInMain\n      });\n    };\n\n    this.setUser = user => {\n      this.setState({\n        user\n      });\n    };\n\n    this.state = {\n      page: localStorage.getItem(\"Authorization\") ? PageTypes.signedInMain : PageTypes.signIn,\n      authToken: localStorage.getItem(\"Authorization\") || null,\n      user: null\n    };\n    this.getCurrentUser();\n  }\n  /**\n   * @description Gets the users\n   */\n\n\n  render() {\n    const {\n      page,\n      user\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 13\n      }\n    }, user ? /*#__PURE__*/React.createElement(Main, {\n      page: page,\n      setPage: this.setPage,\n      setAuthToken: this.setAuthToken,\n      user: user,\n      setUser: this.setUser,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 21\n      }\n    }) : /*#__PURE__*/React.createElement(Auth, {\n      page: page,\n      setPage: this.setPage,\n      setAuthToken: this.setAuthToken,\n      setUser: this.setUser,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 21\n      }\n    }));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/mac/go/src/github.com/Gottacatchemall/clients/src/App.js"],"names":["React","Component","Auth","PageTypes","Main","api","App","constructor","getCurrentUser","state","authToken","response","fetch","base","handlers","myuser","headers","Headers","status","alert","localStorage","setItem","setAuthToken","setUser","user","json","setPageToSignIn","e","preventDefault","setState","page","signIn","setPageToSignUp","signUp","setPage","signedInMain","getItem","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Auth from './Components/Auth/Auth';\nimport PageTypes from './Constants/PageTypes/PageTypes';\nimport Main from './Components/Main/Main';\nimport './Styles/App.css';\nimport api from './Constants/APIEndpoints/APIEndpoints';\n\nclass App extends Component {\n    constructor() {\n        super();\n        this.state = {\n            page: localStorage.getItem(\"Authorization\") ? PageTypes.signedInMain : PageTypes.signIn,\n            authToken: localStorage.getItem(\"Authorization\") || null,\n            user: null\n        }\n\n        this.getCurrentUser()\n    }\n\n    /**\n     * @description Gets the users\n     */\n    getCurrentUser = async () => {\n        if (!this.state.authToken) {\n            return;\n        }\n        const response = await fetch(api.base + api.handlers.myuser, {\n            headers: new Headers({\n                \"Authorization\": this.state.authToken\n            })\n        });\n        if (response.status >= 300) {\n            alert(\"Unable to verify login. Logging out...\");\n            localStorage.setItem(\"Authorization\", \"\");\n            this.setAuthToken(\"\");\n            this.setUser(null)\n            return;\n        }\n        const user = await response.json()\n        this.setUser(user);\n\n    }\n\n    /**\n     * @description sets the page type to sign in\n     */\n    setPageToSignIn = (e) => {\n        e.preventDefault();\n        this.setState({ page: PageTypes.signIn });\n    }\n\n    /**\n     * @description sets the page type to sign up\n     */\n    setPageToSignUp = (e) => {\n        e.preventDefault();\n        this.setState({ page: PageTypes.signUp });\n    }\n\n    setPage = (e, page) => {\n        e.preventDefault();\n        this.setState({ page });\n    }\n\n    /**\n     * @description sets auth token\n     */\n    setAuthToken = (authToken) => {\n        this.setState({ authToken, page: authToken === \"\" ? PageTypes.signIn : PageTypes.signedInMain });\n    }\n\n    /**\n     * @description sets the user\n     */\n    setUser = (user) => {\n        this.setState({ user });\n    }\n\n    render() {\n        const { page, user } = this.state;\n        return (\n            <div>\n                {user ?\n                    <Main page={page}\n                        setPage={this.setPage}\n                        setAuthToken={this.setAuthToken}\n                        user={user}\n                        setUser={this.setUser} />\n                    :\n                    <Auth page={page}\n                        setPage={this.setPage}\n                        setAuthToken={this.setAuthToken}\n                        setUser={this.setUser} />\n                }\n            </div>\n        );\n    }\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}