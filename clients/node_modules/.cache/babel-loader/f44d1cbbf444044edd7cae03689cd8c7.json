{"ast":null,"code":"var _jsxFileName = \"/Users/mac/go/src/github.com/Gottacatchemall/clients/src/Components/Main/Components/UpdateName/UpdateName.js\";\nimport React, { Component } from 'react';\nimport api from '../../../../Constants/APIEndpoints/APIEndpoints';\nimport Errors from '../../../Errors/Errors';\n\nclass UpdateName extends Component {\n  constructor(props) {\n    super(props);\n\n    this.sendRequest = async e => {\n      e.preventDefault();\n      const {\n        firstName,\n        lastName\n      } = this.state;\n      const sendData = {\n        firstName,\n        lastName\n      };\n      const response = await fetch(api.base + api.handlers.myuser, {\n        method: \"PATCH\",\n        body: JSON.stringify(sendData),\n        headers: new Headers({\n          \"Authorization\": localStorage.getItem(\"Authorization\"),\n          \"Content-Type\": \"application/json\"\n        })\n      });\n\n      if (response.status >= 300) {\n        const error = await response.text();\n        console.log(error);\n        this.setError(error);\n        return;\n      }\n\n      alert(\"Name changed\"); // TODO make this better by refactoring errors\n\n      const user = await response.json();\n      this.props.setUser(user);\n    };\n\n    this.setValue = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.setError = error => {\n      this.setState({\n        error\n      });\n    };\n\n    this.state = {\n      firstName: '',\n      lastName: '',\n      error: ''\n    };\n  }\n\n  render() {\n    const {\n      firstName,\n      lastName,\n      error\n    } = this.state;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Errors, {\n      error: error,\n      setError: this.setError,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 13\n      }\n    }, \"Enter a new name\"), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.sendRequest,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 21\n      }\n    }, \"First name: \"), /*#__PURE__*/React.createElement(\"input\", {\n      name: \"firstName\",\n      value: firstName,\n      onChange: this.setValue,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 21\n      }\n    }, \"Last name: \"), /*#__PURE__*/React.createElement(\"input\", {\n      name: \"lastName\",\n      value: lastName,\n      onChange: this.setValue,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"Change name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }\n    })));\n  }\n\n}\n\nexport default UpdateName;","map":{"version":3,"sources":["/Users/mac/go/src/github.com/Gottacatchemall/clients/src/Components/Main/Components/UpdateName/UpdateName.js"],"names":["React","Component","api","Errors","UpdateName","constructor","props","sendRequest","e","preventDefault","firstName","lastName","state","sendData","response","fetch","base","handlers","myuser","method","body","JSON","stringify","headers","Headers","localStorage","getItem","status","error","text","console","log","setError","alert","user","json","setUser","setValue","setState","target","name","value","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport api from '../../../../Constants/APIEndpoints/APIEndpoints';\nimport Errors from '../../../Errors/Errors';\n\nclass UpdateName extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            firstName: '',\n            lastName: '',\n            error: ''\n        }\n    }\n\n    sendRequest = async (e) => {\n        e.preventDefault();\n        const { firstName, lastName } = this.state;\n        const sendData = { firstName, lastName };\n        const response = await fetch(api.base + api.handlers.myuser, {\n            method: \"PATCH\",\n            body: JSON.stringify(sendData),\n            headers: new Headers({\n                \"Authorization\": localStorage.getItem(\"Authorization\"),\n                \"Content-Type\": \"application/json\"\n            })\n        });\n        if (response.status >= 300) {\n            const error = await response.text();\n            console.log(error);\n            this.setError(error);\n            return;\n        }\n        alert(\"Name changed\") // TODO make this better by refactoring errors\n        const user = await response.json();\n        this.props.setUser(user);\n    }\n\n    setValue = (e) => {\n        this.setState({ [e.target.name]: e.target.value });\n    }\n\n    setError = (error) => {\n        this.setState({ error })\n    }\n\n    render() {\n        const { firstName, lastName, error } = this.state;\n        return <>\n            <Errors error={error} setError={this.setError} />\n            <div>Enter a new name</div>\n            <form onSubmit={this.sendRequest}>\n                <div>\n                    <span>First name: </span>\n                    <input name={\"firstName\"} value={firstName} onChange={this.setValue} />\n                </div>\n                <div>\n                    <span>Last name: </span>\n                    <input name={\"lastName\"} value={lastName} onChange={this.setValue} />\n                </div>\n                <input type=\"submit\" value=\"Change name\" />\n            </form>\n        </>\n    }\n\n}\n\nexport default UpdateName;"]},"metadata":{},"sourceType":"module"}