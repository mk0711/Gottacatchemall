{"ast":null,"code":"import _classCallCheck from\"/Users/mac/go/src/github.com/Gottacatchemall/clients/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/mac/go/src/github.com/Gottacatchemall/clients/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/mac/go/src/github.com/Gottacatchemall/clients/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/mac/go/src/github.com/Gottacatchemall/clients/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/mac/go/src/github.com/Gottacatchemall/clients/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import Auth from\"./auth\";//import Error from \"./NotFound\"\nvar Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(props){var _this;_classCallCheck(this,Login);_this=_super.call(this,props);_this.state={user:null,errorMessage:\"\"};_this.handleSignUp=_this.handleSignUp.bind(_assertThisInitialized(_this));_this.handleSignOut=_this.handleSignOut.bind(_assertThisInitialized(_this));_this.handleSignIn=_this.handleSignIn.bind(_assertThisInitialized(_this));_this.handleError=_this.handleError.bind(_assertThisInitialized(_this));return _this;}// Add a handleSignUp() method\n_createClass(Login,[{key:\"handleSignUp\",value:function handleSignUp(email,password,passwordconf,username,firstname,lastname){var _this2=this;this.removeError();var values={email:email,password:password,passwordConf:passwordconf,userName:username,firstName:firstname,lastName:lastname};var json=JSON.stringify(values);var dataURL=\"https://api.mtothekay.me/v1/users\";var request={method:\"POST\",body:json,headers:{\"Content-Type\":\"application/json\"}};fetch(dataURL,request).then(this.setAuthHeader).then(this.parseAsJSON).then(function(newUser){return _this2.setState({user:newUser});}).catch(this.handleError);}},{key:\"setAuthHeader\",value:function setAuthHeader(response){localStorage.setItem(\"authHeader\",response.headers.get(\"Authorization\"));return response;}},{key:\"parseAsJSON\",value:function parseAsJSON(response){if(response.status<300){return response.json();}return response.text().then(function(err){throw err;});}},{key:\"handleError\",value:function handleError(err){this.setState({errorMessage:err});}},{key:\"removeError\",value:function removeError(){this.setState({errorMessage:null});}},{key:\"handleSignIn\",value:function handleSignIn(email,password){var _this3=this;this.removeError();var obj={email:email,password:password};var json=JSON.stringify(obj);var dataURL=\"https://api.mtothekay.me/v1/sessions\";var request={method:\"POST\",body:json,headers:{\"Content-Type\":\"application/json\"}};fetch(dataURL,request).then(this.setAuthHeader).then(this.parseAsJSON).then(function(user){return _this3.setState({user:user});}).catch(this.handleError);}},{key:\"handleSignOut\",value:function handleSignOut(){var _this4=this;this.removeError();var dataURL=\"https://api.mtothekay.me/v1/sessions/mine\";var request={method:\"DELETE\",headers:{Authorization:localStorage.getItem(\"authHeader\")}};fetch(dataURL,request).then(function(response){console.log(response.status);if(response.ok){return response;}return response.text().then(function(err){throw err;});}).then(function(response){localStorage.clear();_this4.setState({user:null});return response;}).catch(this.handleError);}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(Auth,{errorMessage:this.state.errorMessage,user:this.state.user,handleSignUp:this.handleSignUp,handleSignIn:this.handleSignIn}));}}]);return Login;}(Component);export default Login;","map":{"version":3,"sources":["/Users/mac/go/src/github.com/Gottacatchemall/clients/src/containers/Login.js"],"names":["React","Component","Auth","Login","props","state","user","errorMessage","handleSignUp","bind","handleSignOut","handleSignIn","handleError","email","password","passwordconf","username","firstname","lastname","removeError","values","passwordConf","userName","firstName","lastName","json","JSON","stringify","dataURL","request","method","body","headers","fetch","then","setAuthHeader","parseAsJSON","newUser","setState","catch","response","localStorage","setItem","get","status","text","err","obj","Authorization","getItem","console","log","ok","clear"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Auth from \"./auth\";\n//import Error from \"./NotFound\"\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      user: null,\n      errorMessage: \"\"\n    };\n\n    this.handleSignUp = this.handleSignUp.bind(this);\n    this.handleSignOut = this.handleSignOut.bind(this);\n    this.handleSignIn = this.handleSignIn.bind(this);\n    this.handleError = this.handleError.bind(this);\n  }\n\n  // Add a handleSignUp() method\n  handleSignUp(email, password, passwordconf, username, firstname, lastname) {\n    this.removeError();\n    let values = {\n      email: email,\n      password: password,\n      passwordConf: passwordconf,\n      userName: username,\n      firstName: firstname,\n      lastName: lastname\n    };\n\n    let json = JSON.stringify(values);\n    let dataURL = \"https://api.mtothekay.me/v1/users\";\n    let request = {\n      method: \"POST\",\n      body: json,\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    };\n\n    fetch(dataURL, request)\n      .then(this.setAuthHeader)\n      .then(this.parseAsJSON)\n      .then(newUser => this.setState({ user: newUser }))\n      .catch(this.handleError);\n  }\n\n  setAuthHeader(response) {\n    localStorage.setItem(\"authHeader\", response.headers.get(\"Authorization\"));\n    return response;\n  }\n\n  parseAsJSON(response) {\n    if (response.status < 300) {\n      return response.json();\n    }\n    return response.text().then(err => {\n      throw err;\n    });\n  }\n\n  handleError(err) {\n    this.setState({ errorMessage: err });\n  }\n\n  removeError() {\n    this.setState({ errorMessage: null });\n  }\n\n  handleSignIn(email, password) {\n    this.removeError();\n    let obj = {\n      email: email,\n      password: password\n    };\n\n    let json = JSON.stringify(obj);\n    let dataURL = \"https://api.mtothekay.me/v1/sessions\";\n    let request = {\n      method: \"POST\",\n      body: json,\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    };\n\n    fetch(dataURL, request)\n      .then(this.setAuthHeader)\n      .then(this.parseAsJSON)\n      .then(user => this.setState({ user: user }))\n      .catch(this.handleError);\n  }\n\n  handleSignOut() {\n    this.removeError();\n    let dataURL = \"https://api.mtothekay.me/v1/sessions/mine\";\n    let request = {\n      method: \"DELETE\",\n      headers: {\n        Authorization: localStorage.getItem(\"authHeader\")\n      }\n    };\n\n    fetch(dataURL, request)\n      .then(response => {\n        console.log(response.status);\n        if (response.ok) {\n          return response;\n        }\n        return response.text().then(err => {\n          throw err;\n        });\n      })\n      .then(response => {\n        localStorage.clear();\n        this.setState({ user: null });\n        return response;\n      })\n      .catch(this.handleError);\n  }\n\n  render() {\n    return (\n      <div className=\"container\">\n          <Auth\n            errorMessage={this.state.errorMessage}\n            user={this.state.user}\n            handleSignUp={this.handleSignUp}\n            handleSignIn={this.handleSignIn}\n          />\n      </div>\n    );\n  }\n}\n\nexport default Login;\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}