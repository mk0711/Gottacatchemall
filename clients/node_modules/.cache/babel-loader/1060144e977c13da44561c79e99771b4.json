{"ast":null,"code":"var _jsxFileName = \"/Users/mac/go/src/github.com/Gottacatchemall/clients/src/containers/Login.js\";\nimport React, { Component } from 'react';\nimport { Redirect } from 'react-router';\nimport * as api from './api.js';\nimport { Button, FormGroup, FormControl, ControlLabel } from \"react-bootstrap\";\n\nclass SignIn extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleSubmit = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.setField = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.setError = error => {\n      this.setState({\n        error\n      });\n    };\n\n    this.validateForm = () => {\n      return this.state.email.length > 0 && this.password.length > 0;\n    };\n\n    this.state = {\n      email: '',\n      password: '',\n      fireRedirect: false\n    };\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  submitForm() {\n    this.setState({\n      isBusy: true\n    });\n    let body = JSON.stringify({\n      email: this.state.email,\n      password: this.state.password\n    });\n    fetch(api.sessionurl, {\n      method: \"POST\",\n      body: body,\n      headers: new Headers({\n        \"Content-Type\": \"application/json\"\n      })\n    }).then(resp => {\n      if (!resp.ok) {\n        resp.text().then(text => {\n          window.alert('Error ' + resp.status + ' - ' + text);\n        });\n        throw new Error(resp);\n      }\n\n      return resp;\n    }).then(resp => {\n      localStorage.setItem('auth', resp.headers.get('Authorization'));\n      this.setState({\n        url: '/documents',\n        fireRedirect: true\n      });\n    }).catch(err => {\n      console.log(err);\n      this.setState({\n        error: err\n      });\n    }).then(() => {\n      this.setState({\n        isBusy: false\n      });\n    });\n  }\n\n  render() {\n    const {\n      fireRedirect\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"Login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      controlId: \"email\",\n      bsSize: \"large\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(ControlLabel, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }\n    }, \"Email\"), /*#__PURE__*/React.createElement(FormControl, {\n      autoFocus: true,\n      onChange: this.handleSubmit,\n      type: \"email\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(FormGroup, {\n      controlId: \"password\",\n      bsSize: \"large\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(ControlLabel, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }\n    }, \"Password\"), /*#__PURE__*/React.createElement(FormControl, {\n      autoFocus: true,\n      value: this.state.passwrod,\n      onChange: this.state.password = password.value,\n      type: \"password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(Button, {\n      block: true,\n      bsSize: \"small\",\n      disabled: !this.validateForm(),\n      type: \"submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 15\n      }\n    }, \"Login\"), fireRedirect && /*#__PURE__*/React.createElement(Redirect, {\n      to: this.state.url,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 33\n      }\n    })));\n  }\n\n}\n\nexport default SignIn;","map":{"version":3,"sources":["/Users/mac/go/src/github.com/Gottacatchemall/clients/src/containers/Login.js"],"names":["React","Component","Redirect","api","Button","FormGroup","FormControl","ControlLabel","SignIn","constructor","props","handleSubmit","e","setState","target","name","value","setField","setError","error","validateForm","state","email","length","password","fireRedirect","bind","submitForm","isBusy","body","JSON","stringify","fetch","sessionurl","method","headers","Headers","then","resp","ok","text","window","alert","status","Error","localStorage","setItem","get","url","catch","err","console","log","render","passwrod"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Redirect } from 'react-router';\nimport * as api from './api.js';\nimport { Button, FormGroup, FormControl, ControlLabel } from \"react-bootstrap\";\n\n\nclass SignIn extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n        email: '',\n        password: '',\n        fireRedirect: false\n    }\n    this.handleSubmit = this.handleSubmit.bind(this);\n}\n\nhandleSubmit = (e) => {\n  this.setState({ [e.target.name]: e.target.value });\n}\n\nsetField = (e) => {\n    this.setState({ [e.target.name]: e.target.value });\n}\n\nsetError = (error) => {\n    this.setState({ error })\n}\n\nvalidateForm = () => {\n  return this.state.email.length > 0 && this.password.length > 0;\n}\n\nsubmitForm() {\n    this.setState({isBusy: true})\n    let body = JSON.stringify({\n      email: this.state.email, \n      password: this.state.password\n    });\n\n    fetch(api.sessionurl, {\n      method: \"POST\",\n      body: body, \n      headers: new Headers({\n          \"Content-Type\": \"application/json\"\n      })\n    }).then(resp => {\n      if (!resp.ok) {\n        resp.text().then(text => {\n            window.alert('Error ' + resp.status + ' - ' + text)\n        })\n        throw new Error(resp)\n    }\n    return resp\n    }).then(resp => {\n      localStorage.setItem('auth', resp.headers.get('Authorization'))\n            this.setState({ url: '/documents', fireRedirect: true })\n        }).catch(err => {\n            console.log(err);\n            this.setState({ error: err });\n        }).then(() => {\n            this.setState({ isBusy: false });\n        });\n    }\n    \n    render() {\n      const { fireRedirect } = this.state\n        return (\n          <div className=\"Login\">\n            <form onSubmit={this.handleSubmit}>\n              <FormGroup controlId=\"email\" bsSize=\"large\">\n                <ControlLabel>Email</ControlLabel>\n                <FormControl\n                  autoFocus\n                  onChange={(this.handleSubmit)}\n                  type=\"email\"\n                />\n              </FormGroup>\n              <FormGroup controlId=\"password\" bsSize=\"large\">\n                <ControlLabel>Password</ControlLabel>\n                <FormControl\n                  autoFocus\n                  value={this.state.passwrod}\n                  onChange={(this.state.password = password.value)}\n                  type=\"password\"\n                />\n              </FormGroup>\n              <Button block bsSize=\"small\" disabled={!this.validateForm()} type=\"submit\">\n                Login\n              </Button>\n              {fireRedirect && (<Redirect to={this.state.url}></Redirect>)}\n            </form>\n          </div>\n        );\n    }\n}\n\nexport default SignIn;"]},"metadata":{},"sourceType":"module"}