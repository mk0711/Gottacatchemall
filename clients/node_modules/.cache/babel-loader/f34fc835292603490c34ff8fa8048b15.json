{"ast":null,"code":"import _regeneratorRuntime from\"/Users/npham24/go/src/Gottacatchemall/clients/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/npham24/go/src/Gottacatchemall/clients/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/npham24/go/src/Gottacatchemall/clients/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/npham24/go/src/Gottacatchemall/clients/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/npham24/go/src/Gottacatchemall/clients/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/npham24/go/src/Gottacatchemall/clients/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{apiBaseURL}from'../global';import React from'react';import{sendGetRequestWithAuthHeader}from\"../global\";var Inventory=/*#__PURE__*/function(_React$Component){_inherits(Inventory,_React$Component);var _super=_createSuper(Inventory);function Inventory(){var _this;_classCallCheck(this,Inventory);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={balls:[],errorMessage:\"\"};return _this;}_createClass(Inventory,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var inventoryPath,response,inventory,allBallsInfo,_i,_Object$keys,ballName,ballInfo;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:inventoryPath=\"/v1/inventory\";_context.next=3;return sendGetRequestWithAuthHeader(apiBaseURL+inventoryPath);case 3:response=_context.sent;if(!(response.status==401)){_context.next=7;break;}this.setState({errorMessage:\"Please log in.\"});return _context.abrupt(\"return\");case 7:_context.next=9;return response.json();case 9:inventory=_context.sent;allBallsInfo=[];_i=0,_Object$keys=Object.keys(inventory.balls);case 12:if(!(_i<_Object$keys.length)){_context.next=23;break;}ballName=_Object$keys[_i];_context.next=16;return this.getBallInfo(ballName);case 16:ballInfo=_context.sent;ballInfo.remaining=inventory.balls[ballName];ballInfo.imageName=ballName;if(ballInfo){allBallsInfo.push(ballInfo);}case 20:_i++;_context.next=12;break;case 23:this.setState({balls:allBallsInfo});case 24:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"getBallInfo\",value:function(){var _getBallInfo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(ballName){var itemPath,response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:itemPath=\"/v1/items/balls/\"+ballName;_context2.next=3;return sendGetRequestWithAuthHeader(apiBaseURL+itemPath);case 3:response=_context2.sent;_context2.next=6;return response.json();case 6:return _context2.abrupt(\"return\",_context2.sent);case 7:case\"end\":return _context2.stop();}}},_callee2);}));function getBallInfo(_x){return _getBallInfo.apply(this,arguments);}return getBallInfo;}()},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",null,this.state.errorMessage&&/*#__PURE__*/React.createElement(\"p\",{className:\"alert alert-danger\"},this.state.errorMessage),/*#__PURE__*/React.createElement(\"div\",{style:{\"display\":\"flex\",\"flexWrap\":\"wrap\"}},this.state.balls.map(function(ball){return/*#__PURE__*/React.createElement(Item,Object.assign({key:ball.imageName},ball));})));}}]);return Inventory;}(React.Component);var Item=/*#__PURE__*/function(_React$Component2){_inherits(Item,_React$Component2);var _super2=_createSuper(Item);function Item(props){var _this2;_classCallCheck(this,Item);_this2=_super2.call(this,props);_this2.renderItemCard=function(){return/*#__PURE__*/React.createElement(\"div\",{className:\"card\",style:{\"padding\":5+\"px\",\"width\":250+\"px\"}},/*#__PURE__*/React.createElement(\"img\",{style:{\"width\":150+\"px\",\"height\":150+\"px\"},src:apiBaseURL+\"/v1/items/image/\"+_this2.props.imageName,alt:_this2.props.itemName+\" image\"}),/*#__PURE__*/React.createElement(\"h4\",null,_this2.props.itemName),/*#__PURE__*/React.createElement(\"p\",null,_this2.props.desc),/*#__PURE__*/React.createElement(\"h4\",null,\"Remaining: \"+_this2.props.remaining));};return _this2;}_createClass(Item,[{key:\"render\",value:function render(){return this.renderItemCard();}}]);return Item;}(React.Component);export default Inventory;","map":{"version":3,"sources":["/Users/npham24/go/src/Gottacatchemall/clients/src/containers/Inventory.js"],"names":["apiBaseURL","React","sendGetRequestWithAuthHeader","Inventory","state","balls","errorMessage","inventoryPath","response","status","setState","json","inventory","allBallsInfo","Object","keys","ballName","getBallInfo","ballInfo","remaining","imageName","push","itemPath","map","ball","Component","Item","props","renderItemCard","itemName","desc"],"mappings":"q8BAAA,OAASA,UAAT,KAA2B,WAA3B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,4BAAT,KAA6C,WAA7C,C,GAEMC,CAAAA,S,mVACFC,K,CAAQ,CACJC,KAAK,CAAE,EADH,CAEJC,YAAY,CAAE,EAFV,C,uXAMEC,a,CAAgB,e,uBACCL,CAAAA,4BAA4B,CAACF,UAAU,CAAGO,aAAd,C,QAA7CC,Q,oBACFA,QAAQ,CAACC,MAAT,EAAmB,G,0BACnB,KAAKC,QAAL,CAAc,CACZJ,YAAY,CAAE,gBADF,CAAd,E,8DAMoBE,CAAAA,QAAQ,CAACG,IAAT,E,QAAlBC,S,eAEFC,Y,CAAe,E,mBACIC,MAAM,CAACC,IAAP,CAAYH,SAAS,CAACP,KAAtB,C,+DAAZW,Q,yCACc,MAAKC,WAAL,CAAiBD,QAAjB,C,SAAjBE,Q,eACJA,QAAQ,CAACC,SAAT,CAAqBP,SAAS,CAACP,KAAV,CAAgBW,QAAhB,CAArB,CACAE,QAAQ,CAACE,SAAT,CAAqBJ,QAArB,CAEA,GAAIE,QAAJ,CAAc,CACVL,YAAY,CAACQ,IAAb,CAAkBH,QAAlB,EACH,C,4CAGL,KAAKR,QAAL,CAAc,CACVL,KAAK,CAAEQ,YADG,CAAd,E,0SAKcG,Q,4IACRM,Q,CAAW,mBAAqBN,Q,wBACfd,CAAAA,4BAA4B,CAACF,UAAU,CAAGsB,QAAd,C,QAA7Cd,Q,uCACOA,CAAAA,QAAQ,CAACG,IAAT,E,qPAGR,CACL,mBACI,+BACK,KAAKP,KAAL,CAAWE,YAAX,eACG,yBAAG,SAAS,CAAC,oBAAb,EAAmC,KAAKF,KAAL,CAAWE,YAA9C,CAFR,cAII,2BAAK,KAAK,CAAE,CAAC,UAAW,MAAZ,CAAoB,WAAY,MAAhC,CAAZ,EACK,KAAKF,KAAL,CAAWC,KAAX,CAAiBkB,GAAjB,CAAsB,SAAAC,IAAI,qBACvB,oBAAC,IAAD,gBAAM,GAAG,CAAEA,IAAI,CAACJ,SAAhB,EAA+BI,IAA/B,EADuB,EAA1B,CADL,CAJJ,CADJ,CAYH,C,uBArDmBvB,KAAK,CAACwB,S,KAwDxBC,CAAAA,I,2GACF,cAAaC,KAAb,CAAoB,uCAChB,yBAAMA,KAAN,EADgB,OAIpBC,cAJoB,CAIH,UAAM,CACnB,mBACI,2BAAK,SAAS,CAAC,MAAf,CACA,KAAK,CAAE,CACH,UAAW,EAAG,IADX,CAEH,QAAS,IAAM,IAFZ,CADP,eAKI,2BAAK,KAAK,CAAI,CAAC,QAAS,IAAK,IAAf,CAAqB,SAAU,IAAM,IAArC,CAAd,CACK,GAAG,CAAE5B,UAAU,CAAG,kBAAb,CAAkC,OAAK2B,KAAL,CAAWP,SADvD,CAEK,GAAG,CAAE,OAAKO,KAAL,CAAWE,QAAX,CAAsB,QAFhC,EALJ,cAQI,8BAAK,OAAKF,KAAL,CAAWE,QAAhB,CARJ,cASI,6BAAI,OAAKF,KAAL,CAAWG,IAAf,CATJ,cAUI,8BAAK,cAAgB,OAAKH,KAAL,CAAWR,SAAhC,CAVJ,CADJ,CAcH,CAnBmB,eAEnB,C,wDAoBQ,CACL,MACI,MAAKS,cAAL,EADJ,CAGH,C,kBA3Bc3B,KAAK,CAACwB,S,EA8BzB,cAAetB,CAAAA,SAAf","sourcesContent":["import { apiBaseURL } from '../global';\nimport React from 'react';\nimport { sendGetRequestWithAuthHeader } from \"../global\";\n\nclass Inventory extends React.Component {\n    state = {\n        balls: [],\n        errorMessage: \"\"\n    }\n\n    async componentDidMount() {\n        const inventoryPath = \"/v1/inventory\";\n        const response = await sendGetRequestWithAuthHeader(apiBaseURL + inventoryPath);\n        if (response.status == 401) {\n            this.setState({\n              errorMessage: \"Please log in.\"\n            })\n            return;\n        }\n\n        const inventory = await response.json();\n\n        let allBallsInfo = [];\n        for (const ballName of Object.keys(inventory.balls)) {\n            let ballInfo = await this.getBallInfo(ballName);\n            ballInfo.remaining = inventory.balls[ballName];\n            ballInfo.imageName = ballName;\n\n            if (ballInfo) {\n                allBallsInfo.push(ballInfo);\n            }\n        }\n\n        this.setState({\n            balls: allBallsInfo\n        });\n    }\n\n    async getBallInfo(ballName) {\n        const itemPath = \"/v1/items/balls/\" + ballName;\n        const response = await sendGetRequestWithAuthHeader(apiBaseURL + itemPath);\n        return await response.json();\n    }\n\n    render() {\n        return(\n            <div>\n                {this.state.errorMessage && (\n                    <p className=\"alert alert-danger\">{this.state.errorMessage}</p>\n                )}\n                <div style={{\"display\": \"flex\", \"flexWrap\": \"wrap\"}}>\n                    {this.state.balls.map((ball => \n                        <Item key={ball.imageName} {...ball} />))}\n                </div>\n            </div>\n\n        );\n    }\n}\n\nclass Item extends React.Component {\n    constructor (props) {\n        super(props);\n    }\n\n    renderItemCard = () => {\n        return(\n            <div className=\"card\" \n            style={{\n                \"padding\": 5 +\"px\",\n                \"width\": 250 + \"px\",\n            }}>\n                <img style = {{\"width\": 150+ \"px\", \"height\": 150 + \"px\"}} \n                     src={apiBaseURL + \"/v1/items/image/\" + this.props.imageName} \n                     alt={this.props.itemName + \" image\"} />\n                <h4>{this.props.itemName}</h4>\n                <p>{this.props.desc}</p>\n                <h4>{\"Remaining: \" + this.props.remaining}</h4>\n            </div>\n        );\n    }\n\n\n    render() {\n        return(\n            this.renderItemCard()\n        );\n    }\n}\n \nexport default Inventory;"]},"metadata":{},"sourceType":"module"}