{"ast":null,"code":"var _jsxFileName = \"/Users/mac/go/src/github.com/Gottacatchemall/clients/src/containers/Login.js\";\nimport React, { Component } from 'react';\nimport { Redirect } from 'react-router';\nimport * as api from './api.js';\nimport { Button, FormGroup, FormControl, ControlLabel } from \"react-bootstrap\";\n\nclass SignIn extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleSubmit = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.setField = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.setError = error => {\n      this.setState({\n        error\n      });\n    };\n\n    this.validateForm = () => {\n      return this.state.email.length > 0 && this.password.length > 0;\n    };\n\n    this.state = {\n      email: '',\n      password: '',\n      fireRedirect: false\n    };\n  }\n\n  submitForm() {\n    this.setState({\n      isBusy: true\n    });\n    let body = JSON.stringify({\n      email: this.state.email,\n      password: this.state.password\n    });\n    fetch(api.sessionurl, {\n      method: \"POST\",\n      body: body,\n      headers: new Headers({\n        \"Content-Type\": \"application/json\"\n      })\n    }).then(resp => {\n      if (!resp.ok) {\n        resp.text().then(text => {\n          window.alert('Error ' + resp.status + ' - ' + text);\n        });\n        throw new Error(resp);\n      }\n\n      return resp;\n    }).then(resp => {\n      localStorage.setItem('auth', resp.headers.get('Authorization'));\n      this.setState({\n        url: '/documents',\n        fireRedirect: true\n      });\n    }).catch(err => {\n      console.log(err);\n      this.setState({\n        error: err\n      });\n    }).then(() => {\n      this.setState({\n        isBusy: false\n      });\n    });\n  }\n\n  render() {\n    const {\n      fireRedirect\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"Login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      controlId: \"email\",\n      bsSize: \"large\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(ControlLabel, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }\n    }, \"Email\"), /*#__PURE__*/React.createElement(FormControl, {\n      autoFocus: true,\n      type: \"email\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(FormGroup, {\n      controlId: \"password\",\n      bsSize: \"large\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(ControlLabel, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }\n    }, \"Password\"), /*#__PURE__*/React.createElement(FormControl, {\n      value: this.state.password,\n      onChange: this.handleSubmit,\n      type: \"password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(Button, {\n      block: true,\n      bsSize: \"small\",\n      disabled: !this.validateForm(),\n      type: \"submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 15\n      }\n    }, \"Login\"), fireRedirect && /*#__PURE__*/React.createElement(Redirect, {\n      to: this.state.url,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 33\n      }\n    })));\n  }\n\n}\n\nexport default SignIn;","map":{"version":3,"sources":["/Users/mac/go/src/github.com/Gottacatchemall/clients/src/containers/Login.js"],"names":["React","Component","Redirect","api","Button","FormGroup","FormControl","ControlLabel","SignIn","constructor","props","handleSubmit","e","setState","target","name","value","setField","setError","error","validateForm","state","email","length","password","fireRedirect","submitForm","isBusy","body","JSON","stringify","fetch","sessionurl","method","headers","Headers","then","resp","ok","text","window","alert","status","Error","localStorage","setItem","get","url","catch","err","console","log","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Redirect } from 'react-router';\nimport * as api from './api.js';\nimport { Button, FormGroup, FormControl, ControlLabel } from \"react-bootstrap\";\n\n\nclass SignIn extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n        email: '',\n        password: '',\n        fireRedirect: false\n    }\n}\n\nhandleSubmit = (e) => {\n  this.setState({ [e.target.name]: e.target.value });\n}\n\nsetField = (e) => {\n    this.setState({ [e.target.name]: e.target.value });\n}\n\nsetError = (error) => {\n    this.setState({ error })\n}\n\nvalidateForm = () => {\n  return this.state.email.length > 0 && this.password.length > 0;\n}\n\nsubmitForm() {\n    this.setState({isBusy: true})\n    let body = JSON.stringify({\n      email: this.state.email, \n      password: this.state.password\n    });\n\n    fetch(api.sessionurl, {\n      method: \"POST\",\n      body: body, \n      headers: new Headers({\n          \"Content-Type\": \"application/json\"\n      })\n    }).then(resp => {\n      if (!resp.ok) {\n        resp.text().then(text => {\n            window.alert('Error ' + resp.status + ' - ' + text)\n        })\n        throw new Error(resp)\n    }\n    return resp\n    }).then(resp => {\n      localStorage.setItem('auth', resp.headers.get('Authorization'))\n            this.setState({ url: '/documents', fireRedirect: true })\n        }).catch(err => {\n            console.log(err);\n            this.setState({ error: err });\n        }).then(() => {\n            this.setState({ isBusy: false });\n        });\n    }\n    \n    render() {\n      const { fireRedirect } = this.state\n        return (\n          <div className=\"Login\">\n            <form onSubmit={this.handleSubmit}>\n              <FormGroup controlId=\"email\" bsSize=\"large\">\n                <ControlLabel>Email</ControlLabel>\n                <FormControl\n                  autoFocus\n                  type=\"email\"\n                />\n              </FormGroup>\n              <FormGroup controlId=\"password\" bsSize=\"large\">\n                <ControlLabel>Password</ControlLabel>\n                <FormControl\n                  value={this.state.password}\n                  onChange={(this.handleSubmit)}\n                  type=\"password\"\n                />\n              </FormGroup>\n              <Button block bsSize=\"small\" disabled={!this.validateForm()} type=\"submit\">\n                Login\n              </Button>\n              {fireRedirect && (<Redirect to={this.state.url}></Redirect>)}\n            </form>\n          </div>\n        );\n    }\n}\n\nexport default SignIn;"]},"metadata":{},"sourceType":"module"}