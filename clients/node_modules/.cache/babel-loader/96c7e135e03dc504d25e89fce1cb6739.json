{"ast":null,"code":"var _jsxFileName = \"/Users/mac/go/src/github.com/Gottacatchemall/clients/src/containers/Login.js\";\nimport React, { Component } from 'react';\nimport Paths from \"../Constants/APIEndpoints/APIEndpoints\";\nimport { Redirect } from 'react-router';\nimport { Button, FormGroup, FormControl } from \"react-bootstrap\"; //import PageTypes from '../Constants/PageTypes/PageTypes';\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      email: '',\n      password: '',\n      url: \"\",\n      fireRedirect: false\n    };\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  handleChange(event) {\n    this.setState({\n      [event.target.name]: event.target.value\n    });\n  }\n\n  submitCredentials() {\n    this.setState({\n      isBusy: true\n    });\n    let body = JSON.stringify({\n      email: this.state.email,\n      password: this.state.password\n    });\n    fetch(Paths.sessionURL, {\n      method: 'POST',\n      body: body,\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(resp => {\n      if (!resp.ok) {\n        resp.text().then(text => {\n          window.alert('Error ' + resp.status + ' - ' + text);\n        });\n        throw new Error(resp);\n      }\n\n      return resp;\n    }).then(resp => {\n      localStorage.setItem('auth', resp.headers.get('Authorization'));\n      this.setState({\n        url: '/documents',\n        fireRedirect: true\n      });\n    }).catch(err => {\n      console.log(err);\n      this.setState({\n        error: err\n      });\n    }).then(() => {\n      this.setState({\n        isBusy: false\n      });\n    });\n  }\n\n  render() {\n    const {\n      fireRedirect\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"email\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 15\n      }\n    }, \"Login\", /*#__PURE__*/React.createElement(FormControl, {\n      required: true,\n      type: \"email\",\n      name: \"email\",\n      label: \"Email\",\n      value: this.state.email,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(FormControl, {\n      required: true,\n      type: \"password\",\n      name: \"password\",\n      label: \"Password\",\n      value: this.state.password,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      variant: \"contained\",\n      color: \"primary\",\n      disabled: this.state.isBusy,\n      onClick: () => this.submitCredentials(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 19\n      }\n    }, \"Submit\"), fireRedirect && /*#__PURE__*/React.createElement(Redirect, {\n      to: this.state.url,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 37\n      }\n    })));\n  }\n\n}\n\nexport default Logins;","map":{"version":3,"sources":["/Users/mac/go/src/github.com/Gottacatchemall/clients/src/containers/Login.js"],"names":["React","Component","Paths","Redirect","Button","FormGroup","FormControl","Login","constructor","props","state","email","password","url","fireRedirect","handleChange","bind","event","setState","target","name","value","submitCredentials","isBusy","body","JSON","stringify","fetch","sessionURL","method","headers","then","resp","ok","text","window","alert","status","Error","localStorage","setItem","get","catch","err","console","log","error","render","Logins"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Paths from \"../Constants/APIEndpoints/APIEndpoints\"\nimport { Redirect } from 'react-router';\nimport { Button, FormGroup, FormControl} from \"react-bootstrap\";\n//import PageTypes from '../Constants/PageTypes/PageTypes';\n\nclass Login extends Component {\n  constructor(props) {\n      super(props)\n\n      this.state = {\n          email: '',\n          password: '',\n          url: \"\",\n          fireRedirect: false\n      }\n\n      this.handleChange = this.handleChange.bind(this);\n\n  }\n\n  handleChange(event) {\n      this.setState({ [event.target.name]: event.target.value });\n  }\n\n  submitCredentials() {\n      this.setState({ isBusy: true })\n      let body = JSON.stringify({\n          email: this.state.email,\n          password: this.state.password\n      });\n      fetch(Paths.sessionURL, {\n          method: 'POST',\n          body: body,\n          headers: { 'Content-Type': 'application/json' }\n      }).then(resp => {\n          if (!resp.ok) {\n              resp.text().then(text => {\n                  window.alert('Error ' + resp.status + ' - ' + text)\n              })\n              throw new Error(resp)\n          }\n          return resp\n      }).then(resp => {\n          localStorage.setItem('auth', resp.headers.get('Authorization'))\n          this.setState({ url: '/documents', fireRedirect: true })\n      }).catch(err => {\n          console.log(err);\n          this.setState({ error: err });\n      }).then(() => {\n          this.setState({ isBusy: false });\n      });\n  }\n\n  render() {\n      const { fireRedirect } = this.state\n\n      return (\n          <div>\n              <FormGroup />\n              <div className=\"email\">\n                      Login\n                  <FormControl\n                      required\n                      type=\"email\"\n                      name=\"email\"\n                      label=\"Email\"\n                      value={this.state.email}\n                      onChange={this.handleChange}\n                  />\n                  <FormControl\n                      required\n                      type=\"password\"\n                      name=\"password\"\n                      label=\"Password\"\n\n                      value={this.state.password}\n                      onChange={this.handleChange}\n                  />\n                  <Button\n                      variant=\"contained\"\n                      color=\"primary\"\n                      disabled={this.state.isBusy}\n                      onClick={() => this.submitCredentials()}\n                  >Submit</Button>\n                  {fireRedirect && (<Redirect to={this.state.url}></Redirect>)}\n              </div>\n          </div>\n      );\n  }\n}\n\nexport default Logins;"]},"metadata":{},"sourceType":"module"}